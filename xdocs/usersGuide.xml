<?xml version="1.0"?>
<document url="./usersGuide.xml">
<properties>
  <title>The Tiles Framework Project - Users Guide</title>
</properties>

<body>

<section name="Tiles Configuration">

    <subsection name="Web Application Configuration">
    <p>There are several ways to configure your web application to use Tiles. The
       method you choose depends on whether you are using Tiles with another
       framework, like Struts, and which version of the Servlet specification 
       you are targeting.</p>
       
    <p>If you are using Tiles with Struts you do not need to specify the 
       Tiles configuration files in the web application deployment descriptor.
       Instead you reference the Tiles configuration file(s) in your Struts
       configuration using a Plugin.  The configuration should look like this:
       </p>
       
    <source><![CDATA[
    <plug-in className="org.apache.struts.tiles.TilesPlugin">
    <set-property
        property="definitions-config"
           value="/WEB-INF/tiles-defs.xml"/>
    </plug-in>
    ]]></source>

    <p>If you are using Struts 1.2.x you will need to also make sure you are
       using a <code>RequestProcessor</code> class that extends
       <code>org.apache.struts.tiles.TilesRequestProcessor</code>.</p>
       
    <p>If you are not using Struts most of the configuration will be found in
       the web application deployment descriptor as follows:</p>

    <source><![CDATA[
   <servlet>
      <servlet-name>Tiles Servlet</servlet-name>
      <servlet-class>org.apache.struts.tiles.servlets.TilesServlet</servlet-class>
      <init-param>
         <param-name>definitions-config</param-name>
         <param-value>/WEB-INF/tiles-defs.xml</param-value>
      </init-param>
      <load-on-startup>1</load-on-startup>
   </servlet>                   
    ]]></source>

    <p>Tiles will work with applications based on the Servlet 2.2 specification.
       If your application is Servlet 2.2-based you will need to include the TLD
       files under your WEB-INF directory and include the following taglib
       declaration in the deployment descriptor:
       
    <source><![CDATA[
<taglib>
  <taglib-uri>/WEB-INF/tiles.tld</taglib-uri>
  <taglib-location>/WEB-INF/tiles.tld</taglib-location>
</taglib>
    ]]></source>

       You will also need to reference the taglib from each JSP page in the 
       following manner:
       
    <source><![CDATA[
    <%@ taglib uri="/WEB-INF/tiles.tld" prefix="tiles" %>
    ]]></source>

       </p>
       
   <p>If your application is targeting the Servlet 2.3/2.4 specification you 
      do not need to declare the tag libraries in the deployment descriptor.
      They are declared in the Tiles jar file that should be deployed with your
      web application.  In Servlet 2.3/2.4 containers you would reference the
      taglib in JSP pages like this:

    <source><![CDATA[
    <%@ taglib uri="http://struts.apache.org/tags-tiles" prefix="tiles" %>
    ]]></source>
      
    </p>      
   </subsection>
    
    <subsection name="XML Definitions Configuration">
    <p>This section provides an overview of the Tiles XML configuration mechanism.
    </p>
    
    <source><![CDATA[
    <?xml version="1.0" encoding="ISO-8859-1" ?>
    
    <!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 1.3//EN"
       "http://struts.apache.org/dtds/tiles-config_1_3.dtd">
    
    <tiles-definitions>
    
    <definition name="mainLayout" path="/common/layouts/classicLayout.jsp">
        <put name="title"  value="Sample Page Title" />
        <put name="header" value="/common/header.jsp" />
        <put name="menu"   value="mainMenu" />
        <put name="footer" value="/common/footer.jsp" />
        <put name="body"   value=".portal.body" />
    </definition>
    
    <definition name="mainMenu" path="/common/layouts/vboxLayout.jsp" >
        <putList name="list" >
            <add value="menu.links" />
            <add value="menu.taglib.references" />
            <add value="menu.printer.friendly" />
            <add value="menu.old.documents" />
      </putList>
    </definition>
    
    <definition name="aPage" extends="mainLayout">
        <put name="title"  value="Another Title" />
        <put name="body"   value="aPage.body" />
    </definition>
    
    </tiles-definitions>    
    ]]></source>

    </subsection>
</section>

<section name="Using Tiles">
    <subsection name="Inserting Tiles Into A JSP Page">
    </subsection>
    
    <subsection name="Using Tiles Controllers">
    </subsection>
    
    <subsection name="Definitions Factory">
    </subsection>
</section>


</body>
</document>
